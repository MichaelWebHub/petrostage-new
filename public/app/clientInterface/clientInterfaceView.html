<div class="admin-panel">

    <div class="admin-panel-inner">
        <div class="user-card">
            <div class="user-info clearfix">
                <p class="user-name"> <span class="name-output"> {{$ctrl.currentUser.name}} </span> </p>
                <p class="user-email"> <strong class="mr-1">Email: </strong> <span class="email-output"> {{$ctrl.currentUser.email}} </span> </p>
                <p class="user-university"> <span class="university-output"> {{$ctrl.currentUser.university}} </span> </p>
            </div>
        </div>
        <nav class="navigation">
            <ul class="nav-menu">
                <li class="nav-list"><a href="#" class="nav-link"> Events </a></li>
                <li class="nav-list"><a href="#" class="nav-link"> About </a></li>
                <li class="nav-list"><a href="#" class="nav-link"> Jobs </a></li>
                <li class="nav-list"><a href="#" class="nav-link"> Internships </a></li>
                <li class="nav-list"><a href="#" class="nav-link"> Contacts </a></li>
            </ul>
        </nav>
        <div ui-sref="auth" class="logout" ng-click="$ctrl.logout()"> Log out</div>
    </div>
</div>

<div class="orders-panel">
    <div class="orders-panel-inner">
        <div class="orders-top">
            <h2 class="order-heading"> Search:  </h2>

            <div class="filter-block">
                <form class="filter-bar" ng-submit="$ctrl.filterEvents($ctrl.filter.input)" novalidate>
                    <input type="text" class="filter" ng-model="$ctrl.filter.input">
                    <button class="filter-search"> <i class="fas fa-search"></i> </button>
                </form>
            </div>
            <div class="tool-button"> Filters </div>
            <div class="tool-button add-new-order" ng-click="$ctrl.toggleMenu($event)"> Add </div>
            <div class="tool-button" ng-click="$ctrl.showMyEvents()"> My Events </div>

        </div>
        <div class="events-main">

            <div class="events-main-inner clearfix">

                <div class="event-card" ng-repeat="event in $ctrl.events | filter: $ctrl.filter.input track by event._id">
                    <div class="event-card-inner">
                        <div class="event-card-header background-{{event.type.toLowerCase()}}">
                            <h3 class="event-title"> {{event.title}}</h3>
                            <div class="event-edit" ng-hide="event.creators.indexOf($ctrl.currentUser.email) < 0" ng-click="$ctrl.toggleEditEvent(event)"> <i class="far fa-edit"></i> </div>
                        </div>
                        <div class="event-card-main clearfix">
                            <ul class="event-card-buttons clearfix">
                                <li class="event-card-button event-card-info-button event-button-color-{{event.type.toLowerCase()}} event-button-active" data-id="info" ng-click="$ctrl.switchCardInterface($event)"> Information </li>
                                <li class="event-card-button event-card-description-button event-button-color-{{event.type.toLowerCase()}}" data-id="description" ng-click="$ctrl.switchCardInterface($event)"> Description </li>
                                <li class="event-card-button event-card-comment-button event-button-color-{{event.type.toLowerCase()}}" data-id="comments" ng-click="$ctrl.switchCardInterface($event)"> Comments </li>
                            </ul>

                            <div class="event-card-long-row">
                                <div class="event-card-long-row-inner clearfix">

                                    <div class="event-card-info">
                                        <div class="event-card-row">
                                            <h4 class="event-place"> {{event.chapter}}, {{event.place}} - {{event.city}}</h4>
                                        </div>
                                        <div class="event-card-row">
                                            <div class="event-start-date"> <strong class="date-space">Start: </strong> {{event.dateFrom}}</div>
                                            <div class="event-end-date"> <strong class="date-space">End: </strong> {{event.dateTo}}</div>
                                        </div>
                                        <div class="event-card-row">
                                            <i class="far fa-envelope"></i> {{event.email}}
                                        </div>
                                        <div class="event-card-row">
                                            <div class="event-links">
                                                <a class="event-link color-{{event.type.toLowerCase()}}" href="{{event.website}}"> Website </a>
                                                <a class="event-link color-{{event.type.toLowerCase()}}" href="{{event.facebook}}"> <i class="fab fa-facebook-f"></i> </a>
                                                <a class="event-link color-{{event.type.toLowerCase()}}" href="{{event.vk}}"> <i class="fab fa-vk"></i> </a>
                                                <a class="event-link color-{{event.type.toLowerCase()}}" href="{{event.instagram}}"> <i class="fab fa-instagram"></i> </a>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="event-card-description">
                                        <div class="event-card-description-inner">
                                            {{event.description}}
                                        </div>
                                    </div>

                                    <div class="event-card-comments">
                                        <div class="event-card-comments-inner">
                                            <div class="comments-field">

                                                <div class="comment" ng-repeat="comment in event.comments track by comment._id.$oid">
                                                    <!-- use $oid for deployment-->
                                                   <p class="comment-author-row"> <h4 class="comment-author">{{comment.author}} </h4> <span class="comment-time"> {{comment.date}}</span> </p>
                                                    <p class="comment-text"> {{comment.comment}}</p>
                                                </div>

                                            </div>
                                            <div class="new-comment">
                                                <form class="new-comment-form" name="newCommentForm">
                                                    <input type="text" class="new-comment-input" ng-model="$ctrl.newComment" max-length="400" ng-required="true">
                                                    <input type="submit" class="new-comment-submit" value="Send"  ng-disabled="newCommentForm.$invalid" ng-click="$ctrl.sendNewComment(event)">
                                                </form>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

<div class="new-event-wrapper">
    <div class="new-event-inner">
        <h2 class="new-event-heading"> Register new event </h2>
        <div class="close-menu" ng-click="$ctrl.closeMenu($event)"> <i class="far fa-times-circle"></i> </div>

        <div class="new-event-form-wrapper">
            <form class="new-event-form" name="eventFormTag" action="#" method="post" novalidate autocomplete="off">

                <div class="form-row">
                    <input type="text" class="form-input event-form-title" name="title" autocomplete="off" placeholder="Title" ng-model="$ctrl.eventForm.title" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row" style="font-size: 0">
                    <input type="radio" id="type-forum" class="form-input event-form-type" name="type"  ng-model="$ctrl.eventForm.type" value="Forum" ng-required="true">
                    <label class="event-form-type-label" for="type-forum">Forum</label>
                    <input type="radio" id="type-congress" class="form-input event-form-type" name="type"  ng-model="$ctrl.eventForm.type" value="Congress" ng-required="true">
                    <label class="event-form-type-label" for="type-congress">Congress</label>
                    <input type="radio" id="type-conference" class="form-input event-form-type" name="type"  ng-model="$ctrl.eventForm.type" value="Conference" ng-required="true">
                    <label class="event-form-type-label" for="type-conference">Conference</label>
                    <span class="validation-status"></span>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-chapter" name="chapter" autocomplete="off" placeholder="Chapter" ng-model="$ctrl.eventForm.chapter" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-city" name="city" autocomplete="off" placeholder="City" ng-model="$ctrl.eventForm.city" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" id="date-from" class="form-input event-form-datefrom" name="datefrom" autocomplete="off" placeholder="Starting date: dd.mm.yyyy" ng-model="$ctrl.eventForm.dateFrom" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" id="date-to" class="form-input event-form-dateto" name="dateto" autocomplete="off" placeholder="Ending date: dd.mm.yyyy" ng-model="$ctrl.eventForm.dateTo" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-place" name="place" autocomplete="off" placeholder="Place" ng-model="$ctrl.eventForm.place" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <textarea class="form-input event-form-description" name="description" placeholder="Description. 150 - 400 characters" minlength="150" maxlength="400" ng-model="$ctrl.eventForm.description" ng-required="true"></textarea>
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="email" class="form-input event-form-email" name="email" autocomplete="off" placeholder="Email" ng-model="$ctrl.eventForm.email" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-website" name="website" autocomplete="off" placeholder="Website link" ng-model="$ctrl.eventForm.website" ng-required="false">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-facebook" name="facebook" autocomplete="off" placeholder="Facebook link" ng-model="$ctrl.eventForm.facebook" ng-required="false">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-vk" name="vk" autocomplete="off" placeholder="VK link" ng-model="$ctrl.eventForm.vk" ng-required="false">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-instagram" name="instagram" autocomplete="off" placeholder="Instagram link" ng-model="$ctrl.eventForm.instagram" ng-required="false">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-tags" name="tags" autocomplete="off" placeholder="Add tags for this event. Separate by comma" ng-model="$ctrl.eventForm.tags" ng-required="true">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row">
                    <input type="text" class="form-input event-form-creators" name="creators" autocomplete="off" placeholder="Emails of other administrators. Separate by comma" ng-model="$ctrl.eventForm.creators" ng-required="false">
                    <span class="validation-status"></span>
                    <div class="underline">
                        <div class="underline-inner white-line"></div>
                    </div>
                </div>

                <div class="form-row clearfix">
                    <input type="submit" class="form-submit event-submit" value="Register Event" ng-show="$ctrl.isEventRegistration" ng-disabled="eventFormTag.$invalid" ng-click="$ctrl.addEvent($event)">
                    <input type="submit" class="form-submit event-submit" value="Edit Event" ng-hide="$ctrl.isEventRegistration"  ng-click="$ctrl.editEvent($event)">
                    <div class="preloader event-preloader" ng-show="$ctrl.eventPreloader">
                        <div class="circle event-loader"></div>
                    </div>
                </div>

            </form>
        </div>

    </div>
</div>